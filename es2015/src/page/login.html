<template language="js-template">
    <extend-head>
        <title>${_t("Hier kannst du dich einloggen")}</title>
    </extend-head>
    <page>
        <topmenu-component data-name="/$topmenu"></topmenu-component>

        <h1>Hallo from login</h1>
        <section>
            <form>
                <label for="age">Alter</label>
                <input id="age" type="number" data-name="/$user/age" />

                <label for="birthday">Geburtsdatum</label>
                <input id="birthday" data-name="/$user/birthday" type="date" />

                <label for="bname">Benutzername</label>
                <input id="bname" data-name="/$user/bname" required data-validations="required_validator" />

                <label for="email">E-Mail</label>
                <input id="email" type="email" data-name="/$user/email" required data-validations="mail_validator,required_validator" />
                <span data-name="/_state/$user/email" data-view="error"></span>

                <label for="passwd">Passwort</label>
                <input type="password" data-name="/$user/password" id="passwd" required />

                <button type="submit">Anmelden</button>
            </form>
        </section>

        <footer class="info">
            <p>Double-click to edit a todo</p>
            <p>Written by <a href="http://twitter.com/lukeed05">Luke Edwards</a></p>
            <p>Refactored by <a href="https://github.com/xorgy">Aaron Muir
                    Hamilton</a></p>
            <p>Part of <a href="http://todomvc.com">TodoMVC</a></p>
        </footer>
    </page>
</template>

<style language="scss">

</style>

<script language="js">

    import { topmenu } from '../component/topmenu';
    import { magic_form } from '../middleware/magic_form';
    import { mail_validator } from '../middleware/validator/email';
    import { required_validator } from '../middleware/validator/required';

    export let login = {
        components: { "topmenu-component": topmenu },
        views:{
            error : function(args){
                let {change, login, topmenu, _t} = args;
                return change.value.msg.map((e)=>e);
            }
        },
        data() {
            return this
                    .createStore("user", { name: "user login" })
                    .addValidations({mail_validator, required_validator});
        },
        interactions() {
            return magic_form.call(this, {}, function (data) {

                console.log("CHANGE PLEASE BACKEND SYNC", data)

            });
        },
        translations(language) {
            return {};
        }
    }
</script>